{"mappings":"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","sources":["src/main.ts","src/modules/allusersClass.ts","src/modules/profileClass.ts","src/modules/deleteUser.ts"],"sourcesContent":["\r\nimport { logIn, createNewUser, allUsers } from \"./modules/firebaseApp\";\r\nimport { onValue } from \"firebase/database\";\r\nimport { AllUsers } from \"./modules/allusersClass\";\r\nimport { Profile } from \"./modules/profileClass\";\r\nimport { User } from \"./modules/userClass\";\r\nimport { deleteAccount } from \"./modules/deleteUser\";\r\n\r\n\r\ncreateNewUser();\r\n\r\n// Login-form\r\nconst logInUser: HTMLInputElement = document.querySelector('#log-in-name');\r\nconst logInPassword: HTMLInputElement = document.querySelector('#log-in-pass');\r\nconst logInBtn: HTMLButtonElement = document.querySelector('.log-in-btn');\r\n\r\nexport let inputUserName: string;\r\nlet inputPassword: string;\r\n\r\n// Button for login\r\nlogInBtn.addEventListener('click', (e):void => {\r\n    e.preventDefault();\r\n    inputUserName = logInUser.value;\r\n    inputPassword = logInPassword.value;\r\n    logIn(inputUserName, inputPassword, onLoginFinish);\r\n})\r\n\r\n// When log in is successful\r\nfunction onLoginFinish(result: false | User | Profile):void {\r\n    sessionStorage.setItem('username', `${inputUserName}`);\r\n    let usrName = sessionStorage.getItem('username');\r\n    if (result) {\r\n        const profile = new Profile(result);\r\n        console.log(profile);\r\n        sessionStorage.setItem('username', inputUserName)\r\n        onValue(allUsers, snapshot => {\r\n            const uData:any = snapshot.val();\r\n            console.log(uData);\r\n            const users:any = new AllUsers(uData);\r\n            console.log(users);\r\n            const a:HTMLAnchorElement = document.createElement('a');\r\n            a.setAttribute('href', `./forum.html?username=${inputUserName}`);\r\n            a.innerHTML = 'forum';\r\n            document.body.appendChild(a);\r\n\r\n            deleteAccount();\r\n        })\r\n    } else {\r\n        alert('Hey! You sure you have an account here? Or maybe you typed the wrong password.');\r\n    }\r\n}\r\n\r\n","\r\nimport { inputUserName } from \"../main\"; \r\n\r\nexport class AllUsers {\r\n    constructor (\r\n        public readonly allUsers: Object, \r\n    ){\r\n        this.displayAllUsers(allUsers);\r\n    }\r\n\r\n    private displayAllUsers(allUsers):void { /// displays all users from database, \r\n        const allUsersContainer:HTMLDivElement = document.createElement('div'); \r\n        document.body.append(allUsersContainer);\r\n        allUsersContainer.classList.add('allusers-links'); /// shows all users names\r\n        let allUsersDiv:HTMLDivElement = document.createElement('div');\r\n        document.body.append(allUsersDiv);\r\n\r\n        for(const key in allUsers) { /// loops true allusers to display users \r\n            let allUsersName:HTMLParagraphElement = document.createElement('p'); \r\n            allUsersName.innerText = allUsers[key].username; \r\n\r\n            if (allUsers[key].username === inputUserName) { /// get back to my own profile \r\n                allUsersName.innerText = 'Min profil'; \r\n            }\r\n \r\n            allUsersName.style.fontWeight = 'bold'; \r\n            allUsersContainer.appendChild(allUsersName);\r\n            \r\n            allUsersName.addEventListener('click', function():void{ /// when pressed renders other profiles \r\n                allUsersDiv.innerHTML = ''; \r\n                const profileName:HTMLParagraphElement = document.createElement('p'); \r\n                profileName.innerText = allUsers[key].username; \r\n                allUsersDiv.appendChild(profileName); \r\n                const smallBox:HTMLDivElement = document.createElement('div');\r\n                smallBox.classList.add('profile-name-bio-div'); \r\n                smallBox.appendChild(profileName);\r\n                allUsersDiv.appendChild(smallBox); \r\n                profileName.classList.add('profile-name'); \r\n                allUsersDiv.classList.add('profile-container'); \r\n                const bioPar:HTMLParagraphElement = document.createElement('p'); \r\n                bioPar.classList.add('profile-bio'); \r\n                bioPar.innerText = allUsers[key].bio;\r\n                smallBox.appendChild(bioPar);  \r\n                const hideDiv:HTMLDivElement = document.querySelector('.profile-container'); \r\n                hideDiv.style.display = 'none'; \r\n                const hideWrapper:HTMLDivElement = document.querySelector('.user-wrapper');\r\n                hideWrapper.style.display = 'none'; \r\n                const img:HTMLImageElement = document.createElement('img'); \r\n                const stringImg: string = `${allUsers[key].img}`;\r\n                const imgUrl = new URL(stringImg, import.meta.url);\r\n                img.src = imgUrl.href;\r\n                allUsersDiv.appendChild(img);\r\n            })\r\n\r\n        }\r\n    \r\n    }\r\n    \r\n}","// import { contains } from \"@firebase/util\";\r\nimport { inputUserName } from \"../main\"; \r\n\r\n\r\nexport class Profile {\r\n\r\n    // public readonly allUsers; // from database\r\n    constructor (\r\n        public readonly uData: Object, /// from login-function \r\n    ){\r\n        this.displayUser(uData); \r\n         \r\n    }\r\n\r\n    private displayUser(uData):void { /// creates every element upon creation of instans\r\n        sessionStorage.setItem('username', `${inputUserName}`); \r\n        let usrName = sessionStorage.getItem('username');\r\n        const container:HTMLDivElement = document.createElement('div');\r\n        document.body.append(container);\r\n        container.classList.add('profile-container'); \r\n        const nameEl:HTMLHeadingElement = document.createElement('h2');  \r\n        const smallBox = document.createElement('div');\r\n        smallBox.classList.add('profile-name-bio-div'); \r\n        container.appendChild(smallBox); \r\n        nameEl.innerText = 'Min profil'; \r\n        nameEl.classList.add('profile-name'); \r\n        const bioEl:HTMLParagraphElement = document.createElement('p');\r\n        bioEl.innerText = uData.bio;\r\n        bioEl.classList.add('profile-bio'); \r\n        smallBox.appendChild(nameEl);\r\n        smallBox.appendChild(bioEl); \r\n        const imgEl:HTMLImageElement = document.createElement('img'); \r\n        container.appendChild(imgEl); \r\n        const stringProfileImg: string = `${uData.img}`;\r\n        const profileImgUrl = new URL(stringProfileImg, import.meta.url);\r\n        imgEl.src = profileImgUrl.href; \r\n        const hideLogin:HTMLDivElement = document.querySelector('.user-wrapper');\r\n        hideLogin.style.display = 'none'; \r\n        \r\n    }\r\n    \r\n}\r\n\r\n\r\n\r\n","import { ref, remove } from \"firebase/database\";\r\nimport { db, users } from \"./firebaseApp\";\r\n\r\nexport function deleteAccount(): void {\r\n    const buttonDiv:HTMLDivElement = document.createElement('div');\r\n    buttonDiv.classList.add('del-btn-div'); \r\n    document.body.append(buttonDiv);\r\n    const deleteButton: HTMLButtonElement = document.createElement('button');\r\n    deleteButton.classList.add('del-btn'); \r\n    buttonDiv.append(deleteButton);\r\n    deleteButton.innerText = 'Delete my profile';\r\n\r\n    deleteButton.addEventListener('click', (e) => {\r\n        let deleteAccountBtn:boolean = confirm('Are you sure?');\r\n\r\n        if (deleteAccountBtn) {\r\n\r\n            for (let i = 0; i < users.length; i++) {\r\n                const user:string = users[i].username;\r\n                console.log(user);\r\n\r\n                if (sessionStorage.getItem('username') == users[i].username) {\r\n                    const deleteMyUser:any = ref(db, '/SNLApp/User/' + users[i].id);\r\n                    sessionStorage.clear();\r\n                    remove(deleteMyUser);\r\n                    location.href = '/index.html';\r\n                }\r\n            }\r\n\r\n        }\r\n    })\r\n}"],"names":["$dNF4M","parcelRequire","$742434d9730755af$export$9e0072ba6815db9a","constructor","allUsers","this","displayAllUsers","allUsersContainer","document","createElement","body","append","classList","add","allUsersDiv","key","allUsersName","innerText","username","$f0a030afa51d280e$export$948a31b11bc3bf0e","style","fontWeight","appendChild","addEventListener","innerHTML","profileName","smallBox","bioPar","bio","querySelector","display","img","stringImg","imgUrl","URL","src","href","$3c6074073ca7b8fd$export$5120f2d0b8d4cab8","uData","displayUser","sessionStorage","setItem","getItem","container","nameEl","bioEl","imgEl","stringProfileImg","profileImgUrl","$iLhJC","createNewUser","$f0a030afa51d280e$var$logInUser","$f0a030afa51d280e$var$logInPassword","$f0a030afa51d280e$var$inputPassword","$f0a030afa51d280e$var$onLoginFinish","result","profile","console","log","onValue","snapshot","val","users","a","setAttribute","buttonDiv","deleteButton","e","confirm","i","length","user","deleteMyUser","ref","db","id","clear","remove","location","$a1ff96ed4200f7db$export$45abfc3976589d02","alert","preventDefault","value","logIn"],"version":3,"file":"index.a80956a7.js.map"}