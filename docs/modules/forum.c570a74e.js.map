{"mappings":"oeACA,IAAAA,EAAAC,EAAA,YCAAD,EAAAC,EAAA,qBAUO,SAASC,EAAaC,GACzB,MAAMC,EAAyBC,SAASC,cAAc,oBACtDF,EAAeG,UAAY,kBAC3BH,EAAeI,UAAY,GAG3B,IAAIC,EAAWN,EAAMM,SACrB,IAAI,IAAIC,EAAE,EAAGA,EAAED,EAASE,OAAQD,IAAI,CAChC,MAAME,EAAkBH,EAASC,GAC3BG,EAAmBD,EAAQE,GAC3BC,EAAiBH,EAAQA,QACzBI,EAAuBJ,EAAQK,SAE/BC,EAAkCb,SAASc,cAAc,OAC/Df,EAAegB,YAAYF,GAC3BA,EAAiBX,UAAY,gBAE7B,MAAMc,EAAwChB,SAASc,cAAc,MACrED,EAAiBE,YAAYC,GAC7BA,EAAmBC,UAAYN,EAC/BK,EAAmBd,UAAY,WAE/B,MAAMgB,EAA8ClB,SAASc,cAAc,KAC3ED,EAAiBE,YAAYG,GAC7BA,EAAsBD,UAAYP,EAClCQ,EAAsBhB,UAAY,cAGlC,GADsCS,IAAkBQ,eAAeC,QAAQ,YACrD,CACtB,MAAMC,EAAkCrB,SAASc,cAAe,UAChEO,EAAaJ,UAAY,SACzBI,EAAanB,UAAY,SACzBmB,EAAaC,iBAAiB,SAAS,KACnC,MAAMC,EAAa,iBAAmBzB,EAAMW,GAAK,IAAMD,EACjDgB,EAAmBC,EAAAC,IAAI/B,EAAAgC,GAAIJ,GACjCE,EAAAG,OAAOJ,MAEXX,EAAiBE,YAAYM,IAGrC,MAAMQ,EAAsC7B,SAASc,cAAc,SACnEe,EAAoBC,YAAc,2BAClCD,EAAoB3B,UAAY,YAChCH,EAAegB,YAAYc,GAE3B,MAAME,EAAyC/B,SAASc,cAAc,UACtEiB,EAAqBC,YAAc,OACnCjC,EAAegB,YAAYgB,GAC3BA,EAAqB7B,UAAY,UAIjC,MAAM+B,EAAmB,CACrBC,KAAQvC,EAAAwC,YACRC,KAAQzC,EAAA0C,YACRC,KAAQ3C,EAAA4C,aAGZR,EAAqBT,iBAAiB,SAASkB,IAE3CA,EAAEC,iBACF,MAAMC,EAAmB,CACrB9B,SAAS+B,EACTpC,QAASsB,EAAoBe,OAG3BC,EAAU,GAChBA,EAFsBpB,EAAAqB,KAAKb,EAAanC,EAAMW,KAAKsC,KAEjCL,EAClBjB,EAAAuB,OAAOf,EAAanC,EAAMW,IAAKoC,MD3EvC,MAAMI,EAA4BjD,SAASC,cAAc,aACnDiD,EAA4BlD,SAASC,cAAc,aACnDkD,EAA4BnD,SAASC,cAAc,aACjBD,SAASc,cAAe,UACzD,IAAI6B,EAAmBxB,eAAeC,QAAQ,YACrDgC,QAAQC,IAAIV,GAEZM,EAAQ3B,iBAAiB,SAASkB,IAC9BA,EAAEC,iBACH9C,EAAA2D,YAAYzD,MAGfqD,EAAQ5B,iBAAiB,SAAUkB,IAC/BA,EAAEC,iBACF9C,EAAA4D,YAAY1D,MAGhBsD,EAAQ7B,iBAAiB,SAAUkB,IAC/BA,EAAEC,iBACF9C,EAAA6D,YAAY3D","sources":["src/modules/forum.ts","src/modules/display.ts"],"sourcesContent":["\r\nimport { getBeerInDb, getFoodInDb, getWineInDb} from \"./firebaseApp\";\r\nimport { displayTopic } from \"./display\";\r\n\r\nconst beerBtn:HTMLButtonElement = document.querySelector('#beer-btn');\r\nconst foodBtn:HTMLButtonElement = document.querySelector('#food-btn');\r\nconst wineBtn:HTMLButtonElement = document.querySelector('#wine-btn');\r\nconst deleteMsgBtn: HTMLButtonElement = document.createElement ('button');\r\nexport let userName: string = sessionStorage.getItem('username');\r\nconsole.log(userName)\r\n\r\nbeerBtn.addEventListener('click',(e):void => {\r\n    e.preventDefault();\r\n   getBeerInDb(displayTopic)\r\n});\r\n\r\nfoodBtn.addEventListener('click', (e):void => {\r\n    e.preventDefault();\r\n    getFoodInDb(displayTopic);\r\n});\r\n\r\nwineBtn.addEventListener('click', (e):void => {\r\n    e.preventDefault();\r\n    getWineInDb(displayTopic);\r\n})\r\n\r\n\r\n\r\nexport { beerBtn, foodBtn, wineBtn, deleteMsgBtn }","\r\nimport { Message, Topic } from \"./forumClass\";\r\nimport { dbFoodForum, dbBeerForum, dbWineForum, db } from \"./firebaseApp\";\r\nimport { update, push, remove, ref } from \"firebase/database\";\r\nimport { userName } from \"./forum\";\r\n\r\n// This is where we will create elements that will appear on our website\r\n\r\n//FORUM Display section\r\n\r\n\r\nexport function displayTopic(topic:Topic){\r\n    const topicContainer:Element = document.querySelector('#topic-container');\r\n    topicContainer.className = 'topic-container';\r\n    topicContainer.innerHTML = '';\r\n    //loop through topic.messages \r\n    // in the loop:\r\n    let messages = topic.messages;\r\n    for(let i=0; i<messages.length; i++){\r\n        const message:Message = messages[i];\r\n        const messageId:string = message.id;\r\n        const content:string = message.message;\r\n        const messageAuthor:string = message.username;\r\n\r\n        const messageContainer:HTMLDivElement = document.createElement('div');\r\n        topicContainer.appendChild(messageContainer);\r\n        messageContainer.className = 'msg-container';\r\n\r\n        const messageUserElement:HTMLHeadingElement = document.createElement('h4');\r\n        messageContainer.appendChild(messageUserElement);\r\n        messageUserElement.innerText = messageAuthor;\r\n        messageUserElement.className = 'msg-user';\r\n\r\n        const messageContentElement: HTMLParagraphElement = document.createElement('p');\r\n        messageContainer.appendChild(messageContentElement);\r\n        messageContentElement.innerText = content;\r\n        messageContentElement.className = 'msg-content';\r\n\r\n        const shouldAddDeleteButton:boolean = messageAuthor === sessionStorage.getItem('username');\r\n        if(shouldAddDeleteButton) {\r\n            const deleteMsgBtn: HTMLButtonElement = document.createElement ('button');\r\n            deleteMsgBtn.innerText = 'Delete';\r\n            deleteMsgBtn.className = 'delbtn';\r\n            deleteMsgBtn.addEventListener('click', () => {\r\n                const dbPath:any = '/SNLApp/Forum/' + topic.id + '/' + messageId\r\n                const messageDbref:any = ref(db, dbPath);\r\n                remove(messageDbref);\r\n            })\r\n            messageContainer.appendChild(deleteMsgBtn);\r\n        }\r\n    }\r\n    const messageInputElement:HTMLInputElement= document.createElement('input');\r\n    messageInputElement.placeholder = 'Write your message here!';\r\n    messageInputElement.className = 'msg-input';\r\n    topicContainer.appendChild(messageInputElement);\r\n\r\n    const messageButtonElement:HTMLButtonElement = document.createElement('button');\r\n    messageButtonElement.textContent = 'SEND';\r\n    topicContainer.appendChild(messageButtonElement);\r\n    messageButtonElement.className = 'msg-btn';\r\n    \r\n\r\n    //this will refer to which topic is selected in the messageButtonElement(send button)\r\n    const dbReferences:any = {\r\n        'beer': dbBeerForum,\r\n        'wine': dbWineForum,\r\n        'food': dbFoodForum,\r\n    }\r\n\r\n    messageButtonElement.addEventListener('click', e => {\r\n        messageInputElement;\r\n        e.preventDefault();\r\n        const messageToAdd:any = {\r\n            username:userName,\r\n            message: messageInputElement.value\r\n        }\r\n        const newKey:string = push(dbReferences[topic.id]).key;\r\n        const newChat = {};\r\n        newChat[newKey] = messageToAdd;\r\n        update(dbReferences[topic.id], newChat);   \r\n    })\r\n};\r\n\r\n\r\n"],"names":["$dNF4M","parcelRequire","$eb32a8c23a2fe422$export$8cdf3d86a0fed01f","topic","topicContainer","document","querySelector","className","innerHTML","messages","i","length","message","messageId","id","content","messageAuthor","username","messageContainer","createElement","appendChild","messageUserElement","innerText","messageContentElement","sessionStorage","getItem","deleteMsgBtn","addEventListener","dbPath","messageDbref","$iLhJC","ref","db","remove","messageInputElement","placeholder","messageButtonElement","textContent","dbReferences","beer","dbBeerForum","wine","dbWineForum","food","dbFoodForum","e","preventDefault","messageToAdd","$e116a0d0b4a0037a$export$c86d3ca66f38ed60","value","newChat","push","key","update","$e116a0d0b4a0037a$export$3f443d8c4ea3d973","$e116a0d0b4a0037a$export$9a1bfe5c70a4744b","$e116a0d0b4a0037a$export$358c624bb34d9e56","console","log","getBeerInDb","getFoodInDb","getWineInDb"],"version":3,"file":"forum.c570a74e.js.map"}